lines â† â€¢FLines âŠ‘â€¢args

# each line is an action pair
# A Y
# B X
# C Z
# convert to index
# ABC->012, XYZ->012
pairs â† {âŸ¨(0âŠ‘ğ•©)-'A', (2âŠ‘ğ•©)-'X'âŸ©}Â¨ lines

# part one; each pair is [their_action, my_action], look up in a payoff matrix
action_rewardsâ†1â€¿2â€¿3
# outcomes[i,j] = do I win if they play i and I play j?
outcomesâ†[ 0â€¿ 1â€¿Â¯1,
          Â¯1â€¿ 0â€¿ 1,
           1â€¿Â¯1â€¿ 0]
payoffs â† action_rewardsâŠ¸+â‰1 3Ã—outcomes+1
â€¢Show payoffs
rewards â† (âŠ‘âŸœpayoffs)Â¨ pairs
â€¢Show +Â´rewards

# part two
# now the second number is the desired outcome (XYZ=lose draw win=012)
# flatten and reshape to turn it from list-of-lists into a matrix
pairs_matrix â† [â‰ pairs,2]â¥Š âˆ¾pairs

their_actions â† 0âŠâ‰ pairs_matrix
desired_outcomes â† 1âŠâ‰ pairs_matrix
# policy[i,j] = what I do if they play i and I want outcome j
policy â† [2â€¿0â€¿1,  # they play rock
          0â€¿1â€¿2,  # they play paper
          1â€¿2â€¿0]  # they play scissors
my_actions â† {ğ•©âŠ‘policy}Ë˜ pairs_matrix
rewards2 â† (my_actions âŠ action_rewards) + (desired_outcomesÃ—3)
â€¢Show +Â´ rewards2

